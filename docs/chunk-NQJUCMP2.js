import{Ab as o,Bb as d,Cb as I,Dc as M,Gb as B,Hb as A,Jb as f,Kb as v,La as s,Ma as E,Y as h,_a as x,ba as T,bb as p,ga as _,kb as n,lb as i,nb as C,pa as g,qa as b,qb as S,sb as c,sc as F,tc as w,wc as L,xc as k}from"./chunk-S6YJ3D2P.js";var j=(()=>{class t{dbService;expense=[];constructor(e){this.dbService=e}getAllExpenses(){return this.dbService.retrieveAllRecords()}sumByType(e){return this.getAllExpenses().filter(u=>u.type.toLowerCase()===e.toLowerCase()).reduce((u,r)=>u+r.value,0)}sumAllTypes(){let e=this.getAllExpenses(),l=new Map,a=0;return e.forEach(r=>{let y=r.type;l.set(y,(l.get(y)||0)+r.value),a+=r.value}),{sumsByType:Array.from(l.entries()).map(([r,y])=>({type:r,total:y})),totalAll:a}}static \u0275fac=function(l){return new(l||t)(T(M))};static \u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function R(t,m){if(t&1){let e=C();n(0,"button",14),S("click",function(){g(e);let a=c();return b(a.resetTable())}),o(1," Back"),i()}}function D(t,m){if(t&1&&(n(0,"tr")(1,"td"),o(2),i(),n(3,"td"),o(4),f(5,"currency"),i()()),t&2){let e=m.$implicit;s(2),d(e.type),s(2),d(v(5,2,e.total,"BRL"))}}function V(t,m){if(t&1&&(n(0,"tr")(1,"td")(2,"strong"),o(3,"Grand Total"),i()(),n(4,"td")(5,"strong"),o(6),f(7,"currency"),i()()()),t&2){let e=c(2);s(6),d(v(7,1,e.total,"BRL"))}}function H(t,m){if(t&1&&(n(0,"tbody"),x(1,D,6,5,"tr",15)(2,V,8,4,"tr",13),i()),t&2){let e=c();s(),p("ngForOf",e.allTotals),s(),p("ngIf",!e.selectedType)}}function P(t,m){if(t&1&&(n(0,"tbody")(1,"tr")(2,"td",16),o(3),i()()()),t&2){let e=c();s(3),d(e.message)}}function G(t,m){if(t&1&&(n(0,"tbody")(1,"tr")(2,"td"),o(3),i(),n(4,"td"),o(5),f(6,"currency"),i()()()),t&2){let e=c();s(3),I(" ",e.selectedType," "),s(2),d(v(6,2,e.total,"BRL"))}}var J=(()=>{class t{sumService;total=0;allTotals=[];selectedType="";message="";constructor(e){this.sumService=e}ngOnInit(){this.sumAllExpenses()}sumExpensesByType(e){this.selectedType=e.target.value,this.selectedType?(this.total=this.sumService.sumByType(this.selectedType),this.allTotals=this.total>0?[{type:this.selectedType,total:this.total}]:[],this.message=this.total>0?"":"No expenses found for this category."):this.sumAllExpenses()}sumAllExpenses(){let e=this.sumService.sumAllTypes();this.allTotals=e.sumsByType,this.total=e.totalAll,this.message=this.allTotals.length===0&&this.total===0?"No expenses registered yet to be summed.":""}resetTable(){this.selectedType="",this.sumAllExpenses()}static \u0275fac=function(l){return new(l||t)(E(j))};static \u0275cmp=_({type:t,selectors:[["app-sum"]],standalone:!0,features:[B([]),A],decls:31,vars:4,consts:[[1,"text-center"],[1,"container"],["id","type",1,"form-control",3,"change"],["value",""],["value","Food"],["value","Education"],["value","Leisure"],["value","Health"],["value","Transport"],[1,"container","mt-4"],[1,"table-responsive"],["id","expensesSumTable",1,"table"],["class","btn btn-sm btn-info float-end",3,"click",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-sm","btn-info","float-end",3,"click"],[4,"ngFor","ngForOf"],["colspan","2",1,"text-center"]],template:function(l,a){l&1&&(n(0,"main")(1,"div")(2,"h2",0),o(3,"Sum Expenses"),i()(),n(4,"div",1)(5,"select",2),S("change",function(r){return a.sumExpensesByType(r)}),n(6,"option",3),o(7,"Choose the expense type to sum"),i(),n(8,"option",4),o(9,"Food"),i(),n(10,"option",5),o(11,"Education"),i(),n(12,"option",6),o(13,"Leisure"),i(),n(14,"option",7),o(15,"Health"),i(),n(16,"option",8),o(17,"Transport"),i()()(),n(18,"div",9)(19,"div",10)(20,"table",11)(21,"thead")(22,"tr")(23,"th"),o(24,"Type"),i(),n(25,"th"),o(26,"Total Spent "),x(27,R,2,0,"button",12),i()()(),x(28,H,3,2,"tbody",13)(29,P,4,1,"tbody",13)(30,G,7,5,"tbody",13),i()()()()),l&2&&(s(27),p("ngIf",a.selectedType),s(),p("ngIf",a.allTotals.length>0),s(),p("ngIf",a.message),s(),p("ngIf",a.total>0&&a.allTotals.length===0))},dependencies:[k,F,w,L]})}return t})();export{J as SumComponent};
